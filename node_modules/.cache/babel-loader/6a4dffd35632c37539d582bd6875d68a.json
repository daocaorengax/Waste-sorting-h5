{"remainingRequest":"/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/node_modules/babel-loader/lib/index.js!/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/src/store/index.js","dependencies":[{"path":"/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/src/store/index.js","mtime":1640766310060},{"path":"/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1qc29uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC50by1qc29uLmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVleCBmcm9tICd2dWV4JzsKaW1wb3J0IGNvQ29va2llc1V0aWxzIGZyb20gJ0Avc3RvcmFnZS9jb0Nvb2tpZXMnOwppbXBvcnQgeyBQQ19UT0tFTiwgQVBQX1RPS0VOLCBVU0VSX0FERFJFU1MgfSBmcm9tICdAL3R5cGVzL3N0b3JhZ2UnOwppbXBvcnQgeyB0b2tlbkV4cGlyZWQgfSBmcm9tICdAL2NvbmZpZy9pbmRleCc7CmltcG9ydCB7IGdldFVzZXJpbmZvVjIsIGxvZ091dCBhcyBfbG9nT3V0LCBnZXRVc2VySW5mb0NoZWNrIH0gZnJvbSAnQC9hcGkvdXNlci5qcyc7CmltcG9ydCB7IFRvYXN0IH0gZnJvbSAndmFudCc7ClZ1ZS51c2UoVnVleCk7Ci8qKgogKiBUT0RPCiAqIOiwg+ivleS7o+eggQogKiAqLwoKdmFyIHRlc3RBZGRyZXNzID0gewogIGxvbmdpdHVkZTogJzEwOC45NTM5MzknLAogIGxhdGl0dWRlOiAnMzQuMjY2NjExJywKICBwcm92aW5jZTogJ+mZleilvycsCiAgdW5pcXVlQ29kZTogJzYxMDAwMCcKfTsgLy8gY29Db29raWVzLnNldChQQ19UT0tFTiwgJycpCi8vIGNvQ29va2llcy5zZXQoQVBQX1RPS0VOLCAnJykKCmNvQ29va2llc1V0aWxzLnNldChVU0VSX0FERFJFU1MsIHRlc3RBZGRyZXNzKTsKLyoqCiAqIOiwg+ivleS7o+eggWVuZAogKgogKiAqLwoKdmFyIHBjVG9rZW5Jbml0ID0gJyc7CnZhciBhcHBUb2tlbkluaXQgPSAnJzsKdmFyIHVzZXJBZGRyZXNzSW5pdCA9IHt9OwoKdHJ5IHsKICB2YXIgcGNUb2tlbiA9IGNvQ29va2llc1V0aWxzLmdldChQQ19UT0tFTik7CiAgdmFyIGFwcFRva2VuID0gY29Db29raWVzVXRpbHMuZ2V0KEFQUF9UT0tFTik7CiAgdmFyIHVzZXJBZGRyZXNzID0gY29Db29raWVzVXRpbHMuZ2V0KFVTRVJfQUREUkVTUyk7CgogIGlmIChwY1Rva2VuICYmIGFwcFRva2VuKSB7CiAgICBwY1Rva2VuSW5pdCA9IHBjVG9rZW47CiAgICBhcHBUb2tlbkluaXQgPSBhcHBUb2tlbjsKICB9CgogIGlmICh1c2VyQWRkcmVzcykgewogICAgdXNlckFkZHJlc3NJbml0ID0gdXNlckFkZHJlc3M7CiAgfQp9IGNhdGNoIChlKSB7fQoKZXhwb3J0IGRlZmF1bHQgbmV3IFZ1ZXguU3RvcmUoewogIHN0cmljdDogdHJ1ZSwKICBtb2R1bGVzOiB7fSwKICBzdGF0ZTogewogICAgdXNlckluZm86IHt9LAogICAgcGNUb2tlbjogcGNUb2tlbkluaXQsCiAgICBhcHBUb2tlbjogYXBwVG9rZW5Jbml0LAoKICAgIC8qKgogICAgICog55So5oi36YCJ5oup55qE57uP57qs5bqmLuazqOaEj+m7mOiupOWAvCDkuLrnqbrlr7nosaF7fQogICAgICogQHByb3BlcnR5IHtTdHJpbmd9IGxvbmdpdHVkZSAtIOe6rOW6pgogICAgICogQHByb3BlcnR5IHtTdHJpbmd9IGxhdGl0dWRlIC0g57uP5bqmCiAgICAgKiBAcHJvcGVydHkge1N0cmluZ30gcHJvdmluY2UgLSDnnIHlkI0KICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nfSB1bmlxdWVDb2RlIC0g55yB55qE5ZSv5LiA57yW56CBCiAgICAgKiAqLwogICAgY3VycmVudENvb3JkaW5hdGVzOiB1c2VyQWRkcmVzc0luaXQKICB9LAogIGdldHRlcnM6IHsKICAgIGlzTG9naW46IGZ1bmN0aW9uIGlzTG9naW4oc3RhdGUpIHsKICAgICAgcmV0dXJuICEhKHN0YXRlLnBjVG9rZW4gJiYgc3RhdGUuYXBwVG9rZW4pOwogICAgfSwKICAgIC8vIOWtmOWcqOWdkOaghwogICAgaXNIYXNDb29yZGluYXRlOiBmdW5jdGlvbiBpc0hhc0Nvb3JkaW5hdGUoc3RhdGUpIHsKICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHN0YXRlLmN1cnJlbnRDb29yZGluYXRlcykubGVuZ3RoICE9PSAwOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICAvLyDorr7nva7nlKjmiLfkv6Hmga8KICAgIFNFVF9VU0VSX0lORk86IGZ1bmN0aW9uIFNFVF9VU0VSX0lORk8oc3RhdGUpIHsKICAgICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgICBjb25zb2xlLmxvZygnLS0tc3RvcmUg5pu05paw55So5oi35L+h5oGvJyk7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICBzdGF0ZS51c2VySW5mbyA9IGRhdGE7CiAgICB9LAogICAgLy8g6K6+572u55So5oi35b2T5YmN5Zyw5Z2ACiAgICBTRVRfVVNFUl9BRERSRVNTOiBmdW5jdGlvbiBTRVRfVVNFUl9BRERSRVNTKHN0YXRlKSB7CiAgICAgIHZhciBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgICAgc3RhdGUuY3VycmVudENvb3JkaW5hdGVzID0gZGF0YTsKICAgICAgY29Db29raWVzVXRpbHMuc2V0KFVTRVJfQUREUkVTUywgZGF0YSwgewogICAgICAgIGV4cGlyZXM6IHRva2VuRXhwaXJlZAogICAgICB9KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiDorr7nva50b2tlbgogICAgICogQHBhcmFtIHtPYmplY3R9IHN0YXRlCiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSAtIOiuvue9ruS/oeaBrwogICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGEucGNUb2tlbiAtIHBj55qEdG9rZW7jgILlv4XkvKAKICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhLmFwcFRva2VuIC0gYXBw55qEdG9rZW7jgILlv4XkvKAKICAgICAqICovCiAgICBTRVRfVVNFUl9UT0tFTjogZnVuY3Rpb24gU0VUX1VTRVJfVE9LRU4oc3RhdGUpIHsKICAgICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgICBzdGF0ZS5wY1Rva2VuID0gZGF0YS5wY1Rva2VuOwogICAgICBzdGF0ZS5hcHBUb2tlbiA9IGRhdGEuYXBwVG9rZW47CiAgICAgIGNvQ29va2llc1V0aWxzLnNldChQQ19UT0tFTiwgZGF0YS5wY1Rva2VuLCB7CiAgICAgICAgZXhwaXJlczogdG9rZW5FeHBpcmVkCiAgICAgIH0pOwogICAgICBjb0Nvb2tpZXNVdGlscy5zZXQoQVBQX1RPS0VOLCBkYXRhLmFwcFRva2VuLCB7CiAgICAgICAgZXhwaXJlczogdG9rZW5FeHBpcmVkCiAgICAgIH0pOwogICAgfSwKICAgIExPR0lOX09VVDogZnVuY3Rpb24gTE9HSU5fT1VUKHN0YXRlKSB7CiAgICAgIHN0YXRlLnBjVG9rZW4gPSAnJzsKICAgICAgc3RhdGUuYXBwVG9rZW4gPSAnJzsKICAgICAgc3RhdGUudXNlckluZm8gPSB7fTsKICAgICAgc3RhdGUuY3VycmVudENvb3JkaW5hdGVzID0ge307CiAgICAgIGNvQ29va2llc1V0aWxzLnJlbW92ZShBUFBfVE9LRU4pOwogICAgICBjb0Nvb2tpZXNVdGlscy5yZW1vdmUoUENfVE9LRU4pOwogICAgICBjb0Nvb2tpZXNVdGlscy5yZW1vdmUoVVNFUl9BRERSRVNTKTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIC8vIOiOt+WPlueUqOaIt+S/oeaBrwogICAgZ2V0VXNlckluZm86IGZ1bmN0aW9uIGdldFVzZXJJbmZvKF9yZWYpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGdldFVzZXJpbmZvVjIoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHZhciBfcmVzJGRhdGEgPSByZXMuZGF0YSwKICAgICAgICAgICAgICBjb2RlID0gX3JlcyRkYXRhLmNvZGUsCiAgICAgICAgICAgICAgZGF0YSA9IF9yZXMkZGF0YS5kYXRhLAogICAgICAgICAgICAgIG1zZyA9IF9yZXMkZGF0YS5tc2c7CgogICAgICAgICAgaWYgKGNvZGUgPT09IDIwMCkgewogICAgICAgICAgICBjb21taXQoJ1NFVF9VU0VSX0lORk8nLCBkYXRhKTsKICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcihtc2cgfHwgJ+eUqOaIt+S/oeaBr+afpeivouWksei0pe+8gScpOwogICAgICAgICAgICBlcnJvci5yZXNwb25zZSA9IHJlczsKICAgICAgICAgICAgZXJyb3IuaXNFeHBpcmUgPSB0cnVlOyAvLyB0b2tlbiDlpLHmlYjmoIforrAKCiAgICAgICAgICAgIFRvYXN0KGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICBjb21taXQoJ0xPR0lOX09VVCcpOwogICAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgICAgfQogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIFRvYXN0KCfnlKjmiLfkv6Hmga/mn6Xor6LlpLHotKXvvIzor7fph43mlrDlsJ3or5XvvIEnKTsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKgogICAgICog6Z2Z6buY5qOA5rWL77yM55So5oi35peg5oSf55+lCiAgICAgKiDojrflj5bnlKjmiLfkv6Hmga/lubbkuJTmo4DmtYtwYyB0b2tlbiDlkowgYXBwIHRva2VuIOeahOacieaViOaApwogICAgICogKi8KICAgIGNoZWNrVG9rZW5Vc2VyaW5mbzogZnVuY3Rpb24gY2hlY2tUb2tlblVzZXJpbmZvKF9yZWYyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgZ2V0VXNlckluZm9DaGVjaygpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIGNvbW1pdCgnU0VUX1VTRVJfSU5GTycsIHJlcy51c2VySW5mby5kYXRhKTsKICAgICAgICAgIHJlc29sdmUocmVzLnVzZXJJbmZvLmRhdGEpOwogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIGlmIChlcnIuaXNFeHBpcmUpIHsKICAgICAgICAgICAgLy8g6L+H5pyf5LqGCiAgICAgICAgICAgIGNvbW1pdCgnTE9HSU5fT1VUJyk7CiAgICAgICAgICB9IGVsc2Ugey8vIOmdmem7mOajgOa1iyzkuI3lgZrmj5DnpLoKICAgICAgICAgICAgLy8gVG9hc3QoJ+eUqOaIt+S/oeaBr+afpeivouWksei0pe+8jOivt+mHjeaWsOWwneivle+8gScpCiAgICAgICAgICB9CgogICAgICAgICAgY29uc29sZS5sb2coZXJyLnRvSlNPTigpKTsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDpgIDlh7rnmbvlvZUKICAgIGxvZ091dDogZnVuY3Rpb24gbG9nT3V0KF9yZWYzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgX2xvZ091dCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdmFyIF9yZXMkZGF0YTIgPSByZXMuZGF0YSwKICAgICAgICAgICAgICBzdGF0ZSA9IF9yZXMkZGF0YTIuc3RhdGUsCiAgICAgICAgICAgICAgbXNnID0gX3JlcyRkYXRhMi5tc2c7CgogICAgICAgICAgaWYgKHN0YXRlID09PSAnb2snKSB7CiAgICAgICAgICAgIGNvbW1pdCgnTE9HSU5fT1VUJyk7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcihtc2cgfHwgJ+mAgOWHuuWksei0pe+8gScpOwogICAgICAgICAgICBlcnJvci5yZXNwb25zZSA9IHJlczsKICAgICAgICAgICAgVG9hc3QoZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgICB9CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgVG9hc3QoJ+mAgOWHuueZu+W9leWksei0pe+8jOivt+mHjeaWsOWwneivle+8gScpOwogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0KfSk7"},{"version":3,"sources":["/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/src/store/index.js"],"names":["Vue","Vuex","coCookiesUtils","PC_TOKEN","APP_TOKEN","USER_ADDRESS","tokenExpired","getUserinfoV2","logOut","getUserInfoCheck","Toast","use","testAddress","longitude","latitude","province","uniqueCode","set","pcTokenInit","appTokenInit","userAddressInit","pcToken","get","appToken","userAddress","e","Store","strict","modules","state","userInfo","currentCoordinates","getters","isLogin","isHasCoordinate","Object","keys","length","mutations","SET_USER_INFO","data","console","log","SET_USER_ADDRESS","expires","SET_USER_TOKEN","LOGIN_OUT","remove","actions","getUserInfo","commit","Promise","resolve","reject","then","res","code","msg","error","Error","response","isExpire","message","err","checkTokenUserinfo","toJSON"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport coCookiesUtils from '@/storage/coCookies'\nimport { PC_TOKEN, APP_TOKEN, USER_ADDRESS } from '@/types/storage'\nimport { tokenExpired } from '@/config/index'\nimport { getUserinfoV2, logOut, getUserInfoCheck } from '@/api/user.js'\nimport { Toast } from 'vant'\n\nVue.use(Vuex)\n/**\n * TODO\n * 调试代码\n * */\nlet testAddress = {\n  longitude: '108.953939',\n  latitude: '34.266611',\n  province: '陕西',\n  uniqueCode: '610000'\n}\n\n// coCookies.set(PC_TOKEN, '')\n\n// coCookies.set(APP_TOKEN, '')\n\ncoCookiesUtils.set(USER_ADDRESS, testAddress)\n\n\n/**\n * 调试代码end\n *\n * */\n\n\nlet pcTokenInit = ''\nlet appTokenInit = ''\nlet userAddressInit = {}\ntry {\n  let pcToken = coCookiesUtils.get(PC_TOKEN)\n  let appToken = coCookiesUtils.get(APP_TOKEN)\n  let userAddress = coCookiesUtils.get(USER_ADDRESS)\n  if (pcToken && appToken) {\n    pcTokenInit = pcToken\n    appTokenInit = appToken\n  }\n  if (userAddress) {\n    userAddressInit = userAddress\n  }\n} catch (e) {\n\n}\n\n\nexport default new Vuex.Store({\n  strict: true,\n  modules: {},\n  state: {\n    userInfo: {},\n    pcToken: pcTokenInit,\n    appToken: appTokenInit,\n    /**\n     * 用户选择的经纬度.注意默认值 为空对象{}\n     * @property {String} longitude - 纬度\n     * @property {String} latitude - 经度\n     * @property {String} province - 省名\n     * @property {String} uniqueCode - 省的唯一编码\n     * */\n    currentCoordinates: userAddressInit\n  },\n  getters: {\n    isLogin (state) {\n      return !!(state.pcToken && state.appToken)\n    },\n    // 存在坐标\n    isHasCoordinate (state) {\n      return Object.keys(state.currentCoordinates).length !== 0\n    }\n  },\n  mutations: {\n    // 设置用户信息\n    SET_USER_INFO (state, data = {}) {\n      console.log('---store 更新用户信息')\n      console.log(data)\n      state.userInfo = data\n    },\n    // 设置用户当前地址\n    SET_USER_ADDRESS (state, data = {}) {\n      state.currentCoordinates = data\n      coCookiesUtils.set(USER_ADDRESS, data, { expires: tokenExpired })\n    },\n    /**\n     * 设置token\n     * @param {Object} state\n     * @param {Object} data - 设置信息\n     * @param {String} data.pcToken - pc的token。必传\n     * @param {String} data.appToken - app的token。必传\n     * */\n    SET_USER_TOKEN (state, data = {}) {\n      state.pcToken = data.pcToken\n      state.appToken = data.appToken\n      coCookiesUtils.set(PC_TOKEN, data.pcToken, { expires: tokenExpired })\n      coCookiesUtils.set(APP_TOKEN, data.appToken, { expires: tokenExpired })\n    },\n    LOGIN_OUT (state) {\n      state.pcToken = ''\n      state.appToken = ''\n      state.userInfo = {}\n      state.currentCoordinates = {}\n      coCookiesUtils.remove(APP_TOKEN)\n      coCookiesUtils.remove(PC_TOKEN)\n      coCookiesUtils.remove(USER_ADDRESS)\n    }\n  },\n  actions: {\n    // 获取用户信息\n    getUserInfo ({ commit }) {\n      return new Promise((resolve, reject) => {\n        getUserinfoV2().then(res => {\n          let { code, data, msg } = res.data\n          if (code === 200) {\n            commit('SET_USER_INFO', data)\n            resolve(data)\n          } else {\n            let error = new Error(msg || '用户信息查询失败！')\n            error.response = res\n            error.isExpire = true // token 失效标记\n            Toast(error.message)\n            commit('LOGIN_OUT')\n            reject(error)\n          }\n        }).catch(err => {\n          Toast('用户信息查询失败，请重新尝试！')\n          reject(err)\n          console.log(err)\n        })\n      })\n    },\n    /**\n     * 静默检测，用户无感知\n     * 获取用户信息并且检测pc token 和 app token 的有效性\n     * */\n    checkTokenUserinfo ({ commit }) {\n      return new Promise((resolve, reject) => {\n        getUserInfoCheck().then(res => {\n          console.log(res)\n          commit('SET_USER_INFO', res.userInfo.data)\n          resolve(res.userInfo.data)\n        }).catch(err => {\n          if (err.isExpire) {\n            // 过期了\n            commit('LOGIN_OUT')\n          } else {\n            // 静默检测,不做提示\n            // Toast('用户信息查询失败，请重新尝试！')\n          }\n          console.log(err.toJSON())\n          reject(err)\n        })\n      })\n    },\n    // 退出登录\n    logOut ({ commit }) {\n      return new Promise((resolve, reject) => {\n        logOut().then(res => {\n          let { state, msg } = res.data\n          if (state === 'ok') {\n            commit('LOGIN_OUT')\n            resolve()\n          } else {\n            let error = new Error(msg || '退出失败！')\n            error.response = res\n            Toast(error.message)\n            reject(error)\n          }\n        }).catch(err => {\n          Toast('退出登录失败，请重新尝试！')\n          reject(err)\n        })\n      })\n    }\n  }\n})\n"]}]}