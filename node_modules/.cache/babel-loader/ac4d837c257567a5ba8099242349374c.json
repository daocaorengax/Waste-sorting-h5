{"remainingRequest":"/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/node_modules/babel-loader/lib/index.js!/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/src/request/app.js","dependencies":[{"path":"/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/src/request/app.js","mtime":1629210121308},{"path":"/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CgovKioKICogYXBwIOaOpeWPoyByZXF1ZXN0IOWunuS+iwogKiAqLwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7IC8vIGltcG9ydCB7IEFQUF9CQVNFX1VSTCB9IGZyb20gJ0AvcmVxdWVzdC9CQVNFX1VSTCcKCmltcG9ydCB7IGVycm9ySW50ZXJjZXB0b3JzIH0gZnJvbSAnLi9pbnRlcmNlcHRvcnMnOwppbXBvcnQgaXNOZWVkU3RyaW5naWZ5IGZyb20gIi4vdXRpbHMvaXNOZWVkU3RyaW5naWZ5IjsKaW1wb3J0IHFzIGZyb20gInFzIjsKaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ2xvZGFzaC1lcyc7CnZhciBhcHAgPSBheGlvcy5jcmVhdGUoKTsKYXBwLmRlZmF1bHRzLnRpbWVvdXQgPSA1MDAwMDsKYXBwLmRlZmF1bHRzLmJhc2VVUkwgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJOwphcHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb24ucGxhdGZvcm0gPSAnaDUnOwphcHAuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBpZiAoaXNOZWVkU3RyaW5naWZ5KGNvbmZpZykpIHsKICAgIGNvbmZpZy5kYXRhID0gcXMuc3RyaW5naWZ5KGNvbmZpZy5kYXRhKTsKICB9CgogIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBzdG9yZS5nZXR0ZXJzLmlzTG9naW4gPyAiQmVhcmVyICIuY29uY2F0KHN0b3JlLnN0YXRlLmFwcFRva2VuKSA6ICcnOwogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwphcHAuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICByZXR1cm4gcmVzcG9uc2U7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGVycm9ySW50ZXJjZXB0b3JzKGVycm9yKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgYXBwOwpleHBvcnQgdmFyIHBvc3RGb3JtID0gZnVuY3Rpb24gcG9zdEZvcm0odXJsLCBkYXRhKSB7CiAgdmFyIGNvbmZpZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgY29uZmlnLmhlYWRlcnMgPSBpc1BsYWluT2JqZWN0KGNvbmZpZy5oZWFkZXJzKSA/IGNvbmZpZy5oZWFkZXJzIDoge307CiAgY29uZmlnLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc7CiAgcmV0dXJuIGFwcC5wb3N0KHVybCwgZGF0YSwgY29uZmlnKTsKfTs="},{"version":3,"sources":["/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/src/request/app.js"],"names":["axios","store","errorInterceptors","isNeedStringify","qs","isPlainObject","app","create","defaults","timeout","baseURL","process","env","VUE_APP_BASE_API","headers","common","platform","interceptors","request","use","config","data","stringify","Authorization","getters","isLogin","state","appToken","error","Promise","reject","response","postForm","url","post"],"mappings":";;AAAA;AACA;AACA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB,C,CACA;;AACA,SAASC,iBAAT,QAAkC,gBAAlC;AACA,OAAOC,eAAP,MAA4B,yBAA5B;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,SAASC,aAAT,QAA8B,WAA9B;AAEA,IAAMC,GAAG,GAAGN,KAAK,CAACO,MAAN,EAAZ;AACAD,GAAG,CAACE,QAAJ,CAAaC,OAAb,GAAuB,KAAvB;AACAH,GAAG,CAACE,QAAJ,CAAaE,OAAb,GAAuBC,OAAO,CAACC,GAAR,CAAYC,gBAAnC;AACAP,GAAG,CAACE,QAAJ,CAAaM,OAAb,CAAqBC,MAArB,CAA4BC,QAA5B,GAAuC,IAAvC;AACAV,GAAG,CAACW,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CAA6B,UAAAC,MAAM,EAAI;AACrC,MAAIjB,eAAe,CAACiB,MAAD,CAAnB,EAA6B;AAC3BA,IAAAA,MAAM,CAACC,IAAP,GAAcjB,EAAE,CAACkB,SAAH,CAAaF,MAAM,CAACC,IAApB,CAAd;AACD;;AACDD,EAAAA,MAAM,CAACN,OAAP,CAAeS,aAAf,GAA+BtB,KAAK,CAACuB,OAAN,CAAcC,OAAd,oBAAkCxB,KAAK,CAACyB,KAAN,CAAYC,QAA9C,IAA2D,EAA1F;AACA,SAAOP,MAAP;AACD,CAND,EAMG,UAAAQ,KAAK,EAAI;AACV,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CARD;AASAtB,GAAG,CAACW,YAAJ,CAAiBc,QAAjB,CAA0BZ,GAA1B,CACE,UAAAY,QAAQ,EAAI;AACV,SAAOA,QAAP;AACD,CAHH,EAIE,UAAAH,KAAK,EAAI;AACP1B,EAAAA,iBAAiB,CAAC0B,KAAD,CAAjB;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAPH;AAUA,eAAetB,GAAf;AAEA,OAAO,IAAM0B,QAAQ,GAAG,SAAXA,QAAW,CAACC,GAAD,EAAMZ,IAAN,EAA4B;AAAA,MAAhBD,MAAgB,uEAAP,EAAO;AAClDA,EAAAA,MAAM,CAACN,OAAP,GAAiBT,aAAa,CAACe,MAAM,CAACN,OAAR,CAAb,GAAgCM,MAAM,CAACN,OAAvC,GAAiD,EAAlE;AACAM,EAAAA,MAAM,CAACN,OAAP,CAAe,cAAf,IAAiC,mCAAjC;AACA,SAAOR,GAAG,CAAC4B,IAAJ,CAASD,GAAT,EAAcZ,IAAd,EAAoBD,MAApB,CAAP;AACD,CAJM","sourcesContent":["/**\n * app 接口 request 实例\n * */\nimport axios from 'axios'\nimport store from '@/store'\n// import { APP_BASE_URL } from '@/request/BASE_URL'\nimport { errorInterceptors } from './interceptors'\nimport isNeedStringify from \"./utils/isNeedStringify\"\nimport qs from \"qs\"\nimport { isPlainObject } from 'lodash-es'\n\nconst app = axios.create()\napp.defaults.timeout = 50000\napp.defaults.baseURL = process.env.VUE_APP_BASE_API\napp.defaults.headers.common.platform = 'h5'\napp.interceptors.request.use(config => {\n  if (isNeedStringify(config)) {\n    config.data = qs.stringify(config.data)\n  }\n  config.headers.Authorization = store.getters.isLogin ? `Bearer ${store.state.appToken}` : ''\n  return config\n}, error => {\n  return Promise.reject(error)\n})\napp.interceptors.response.use(\n  response => {\n    return response\n  },\n  error => {\n    errorInterceptors(error)\n    return Promise.reject(error)\n  }\n)\n\nexport default app\n\nexport const postForm = (url, data, config = {}) => {\n  config.headers = isPlainObject(config.headers) ? config.headers : {}\n  config.headers['Content-Type'] = 'application/x-www-form-urlencoded'\n  return app.post(url, data, config)\n}\n"]}]}