{"remainingRequest":"/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/src/views/login/components/LoginFooter.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/src/views/login/components/LoginFooter.vue","mtime":1630979990860},{"path":"/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/DCR-Data/1_Work/KH/KH04/Waste-sorting-h5/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDYWxsQXBwIGZyb20gJ2NhbGxhcHAtbGliJwovLyBpbXBvcnQge1RvYXN0fSBmcm9tICJ2YW50IgppbXBvcnQge2dldEFuZHJvaWRBUFBWZXJzaW9uLCBnZXRJb3NBcHBNZXNzYWdlfSBmcm9tICJAL2FwaS9hcGlBcHAiCmltcG9ydCB7aXNJT1N9IGZyb20gJ0AvdXRpbHMvbmF2aWdhdG9yJwppbXBvcnQgKiBhcyBhcHBDb25maWcgZnJvbSAnQC9jb25maWcvYXBwLmpzJwoKbGV0IHNjaGVtZSA9IHt9CmNvbnNvbGUubG9nKGFwcENvbmZpZykKaWYgKGlzSU9TKSB7CiAgc2NoZW1lID0gewogICAgcHJvdG9jb2w6IGFwcENvbmZpZy5pb3NDb25maWcuc2NoZW1lLnByb3RvY29sCiAgfQp9IGVsc2UgewogIHNjaGVtZSA9IHsKICAgIHByb3RvY29sOiBhcHBDb25maWcuYW5kcm9pZENvbmZpZy5zY2hlbWUucHJvdG9jb2wsCiAgICBob3N0OiBhcHBDb25maWcuYW5kcm9pZENvbmZpZy5zY2hlbWUuaG9zdCwKICAgIHBvcnQ6IGFwcENvbmZpZy5hbmRyb2lkQ29uZmlnLnNjaGVtZS5wb3J0CiAgfQp9CmNvbnN0IG9wdGlvbnMgPSB7CiAgc2NoZW1lOiBzY2hlbWUsCiAgaW50ZW50OiB7CiAgICBwYWNrYWdlOiBhcHBDb25maWcuYW5kcm9pZENvbmZpZy5wYWNrYWdlLAogICAgc2NoZW1lOiBhcHBDb25maWcuYW5kcm9pZENvbmZpZy5zY2hlbWUucHJvdG9jb2wKICB9LAogIC8vIHVuaXZlcnNhbDogewogIC8vICAgaG9zdDogJy4vJwogIC8vIH0sCiAgYXBwc3RvcmU6IGFwcENvbmZpZy5pb3NBcHBTdG9yZSwKICB5aW5neW9uZ2JhbzogYXBwQ29uZmlnLnlpbmdZb25nQmFvTGluaywKICBmYWxsYmFjazogJycsCiAgbG9nRnVuYyhzdGF0dXMpIHsKICAgIGlmIChzdGF0dXMgPT09ICdmYWlsdXJlJykgewogICAgICAvLyDot7PovazlpLHotKXkuoYKICAgICAgLy8gVG9hc3QoJ+i3s+i9rOWksei0peS6hicpCiAgICB9CiAgfQp9CmNvbnN0IGNhbGxMaWIgPSBuZXcgQ2FsbEFwcChvcHRpb25zKQpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvZ2luRm9vdGVyIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmVyc2lvbjogJycsCiAgICAgIGRvd25sb2FkX3VybDogJycKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICBpZiAoaXNJT1MpIHsKICAgICAgdGhpcy5kb3dubG9hZF91cmwgPSBhcHBDb25maWcuaW9zQXBwU3RvcmUKICAgICAgdGhpcy5nZXRJb3NEYXRhKCkKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuZ2V0QXBwRGF0YSgpCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmiZPlvIBhcHAKICAgIG9wZW5MaWJBcHAoKSB7CiAgICAgIGNhbGxMaWIub3Blbih7CiAgICAgICAgcGF0aDogaXNJT1MgPyAnJyA6ICd3ZWxjb21lJwogICAgICB9KQogICAgfSwKICAgIGdldEFwcERhdGEoKSB7CiAgICAgIGdldEFuZHJvaWRBUFBWZXJzaW9uKHt2ZXJzaW9uX2NvZGU6IDF9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhPy5kb3dubG9hZF91cmwpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKQogICAgICAgICAgbGV0IHJlc0RhdGEgPSByZXMuZGF0YQogICAgICAgICAgdGhpcy52ZXJzaW9uID0gcmVzRGF0YS52ZXJzaW9uX25hbWUKICAgICAgICAgIHRoaXMuZG93bmxvYWRfdXJsID0gcmVzRGF0YS5kb3dubG9hZF91cmwKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLiR0b2FzdCgn5p+l6K+i5aSx6LSl77yM6K+36YeN5paw5bCd6K+V77yBJykKICAgICAgfSkKICAgIH0sCiAgICAvLyDmn6Xor6IKICAgIGdldElvc0RhdGEoKSB7CiAgICAgIGdldElvc0FwcE1lc3NhZ2Uoe3ZlcnNpb25fbmFtZTogJzEuMC4wJ30pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmRhdGE/LnZlcnNpb25fbmFtZSkgewogICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpCiAgICAgICAgICBsZXQgcmVzRGF0YSA9IHJlcy5kYXRhCiAgICAgICAgICB0aGlzLnZlcnNpb24gPSByZXNEYXRhLnZlcnNpb25fbmFtZQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJHRvYXN0KCfmn6Xor6LlpLHotKXvvIzor7fph43mlrDlsJ3or5XvvIEnKQogICAgICB9KQogICAgfSwKICAgIC8vIOmHjeivlQogICAgcmV0cnlHZXRVcmwgKCkgewogICAgICBpZiAoIWlzSU9TKSB7CiAgICAgICAgdGhpcy4kdG9hc3QoJ+S4i+i9veWcsOWdgOafpeivouWksei0pe+8jOivt+mHjeaWsOWwneivle+8gScpCiAgICAgICAgdGhpcy5nZXRBcHBEYXRhKCkKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["LoginFooter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LoginFooter.vue","sourceRoot":"src/views/login/components","sourcesContent":["<template>\n  <div class=\"login-footer\">\n    <div class=\"login-footer__divider\">\n      <div class=\"am-cf\"><!--解决vant divider 组件margin-top 问题--></div>\n      <van-divider>其他</van-divider>\n      <div class=\"am-cf\"><!--解决vant divider 组件margin-bottom 问题--></div>\n    </div>\n    <div class=\"login-footer__bd am-flex-rc-between\">\n      <div class=\"login-footer__ct-list am-flex-col-center\" @click=\"openLibApp\">\n        <img src=\"https://shigongbang.oss-cn-hangzhou.aliyuncs.com/app/2021/08/1629945018600.png\"\n             class=\"login-footer__ct-icon\">\n        <span>打开经营帮APP</span>\n      </div>\n      <a class=\"login-footer__ct-list am-flex-col-center\" :href=\"download_url\" v-if=\"download_url\">\n        <img src=\"https://shigongbang.oss-cn-hangzhou.aliyuncs.com/app/2021/08/1629945047710.png\"\n             class=\"login-footer__ct-icon\">\n        <span>下载经营帮APP</span>\n      </a>\n      <div class=\"login-footer__ct-list am-flex-col-center\" v-else @click=\"retryGetUrl\">\n        <img src=\"https://shigongbang.oss-cn-hangzhou.aliyuncs.com/app/2021/08/1629945047710.png\"\n             class=\"login-footer__ct-icon\">\n        <span>下载经营帮APP</span>\n      </div>\n    </div>\n    <div class=\"login-footer__copyright\">\n      <p class=\"login-footer__copyright-text\">开发者:中钧科技有限公司陕西分公司</p>\n      <p class=\"login-footer__copyright-text\">版本: {{version}}</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport CallApp from 'callapp-lib'\n// import {Toast} from \"vant\"\nimport {getAndroidAPPVersion, getIosAppMessage} from \"@/api/apiApp\"\nimport {isIOS} from '@/utils/navigator'\nimport * as appConfig from '@/config/app.js'\n\nlet scheme = {}\nconsole.log(appConfig)\nif (isIOS) {\n  scheme = {\n    protocol: appConfig.iosConfig.scheme.protocol\n  }\n} else {\n  scheme = {\n    protocol: appConfig.androidConfig.scheme.protocol,\n    host: appConfig.androidConfig.scheme.host,\n    port: appConfig.androidConfig.scheme.port\n  }\n}\nconst options = {\n  scheme: scheme,\n  intent: {\n    package: appConfig.androidConfig.package,\n    scheme: appConfig.androidConfig.scheme.protocol\n  },\n  // universal: {\n  //   host: './'\n  // },\n  appstore: appConfig.iosAppStore,\n  yingyongbao: appConfig.yingYongBaoLink,\n  fallback: '',\n  logFunc(status) {\n    if (status === 'failure') {\n      // 跳转失败了\n      // Toast('跳转失败了')\n    }\n  }\n}\nconst callLib = new CallApp(options)\nexport default {\n  name: \"LoginFooter\",\n  data() {\n    return {\n      version: '',\n      download_url: ''\n    }\n  },\n  created() {\n    if (isIOS) {\n      this.download_url = appConfig.iosAppStore\n      this.getIosData()\n    } else {\n      this.getAppData()\n    }\n  },\n  methods: {\n    // 打开app\n    openLibApp() {\n      callLib.open({\n        path: isIOS ? '' : 'welcome'\n      })\n    },\n    getAppData() {\n      getAndroidAPPVersion({version_code: 1}).then(res => {\n        if (res.data?.download_url) {\n          console.log(res.data)\n          let resData = res.data\n          this.version = resData.version_name\n          this.download_url = resData.download_url\n        }\n      }).catch(() => {\n        this.$toast('查询失败，请重新尝试！')\n      })\n    },\n    // 查询\n    getIosData() {\n      getIosAppMessage({version_name: '1.0.0'}).then(res => {\n        if (res.data?.version_name) {\n          console.log(res.data)\n          let resData = res.data\n          this.version = resData.version_name\n        }\n      }).catch(() => {\n        this.$toast('查询失败，请重新尝试！')\n      })\n    },\n    // 重试\n    retryGetUrl () {\n      if (!isIOS) {\n        this.$toast('下载地址查询失败，请重新尝试！')\n        this.getAppData()\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n$page-plr: 0.64rem;\n.login-footer__divider {\n  padding: 0 $page-plr 0;\n}\n\n.login-footer__bd {\n  padding: 0 $page-plr;\n}\n\n.login-footer__ct-list {\n  width: 3.68rem;\n  font-size: 12px;\n  color: #9B9EA5;\n}\n\n.login-footer__ct-icon {\n  display: block;\n  width: .91rem;\n  margin-bottom: .27rem;\n}\n\n.login-footer__copyright {\n  margin-top: 1.17rem;\n  padding-bottom: 0.53rem;\n  font-size: 12px;\n  color: #C0C4CC;\n  text-align: center;\n}\n.login-footer__copyright-text{\n  & + .login-footer__copyright-text {\n    margin-top: .27rem;\n  }\n}\n</style>\n"]}]}